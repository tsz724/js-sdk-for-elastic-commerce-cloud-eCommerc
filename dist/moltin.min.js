/*! moltin-sdk minified - v0.1.0 - 2014-05-28 */
var Moltin;Moltin=function(){function a(a){this.options=this.Merge(this.options,a)}return a.prototype.options={publicId:"",userId:"",auth:{},url:"http://api.dev.molt.in/",version:"beta",debug:!1,notice:function(a,b){return alert(a+": "+b)},methods:["GET","POST","PUT","DELETE"]},a.prototype.Merge=function(a,b){var c,d,e;d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],d[c]=e;return d},a.prototype.Serialize=function(a,b){var c,d,e;null==b&&(b=null),d=[];for(c in a)e=a[c],c=null!==b?b+"["+c+"]":c,d.push("object"==typeof e?this.Serialize(e(c)):encodeURIComponent(c)+"="+encodeURIComponent(e));return d.join("&")},a.prototype.Error=function(a){var b,c,d,e;if(c="","undefind"!=typeof a.errors){e=a.errors;for(b in e)d=e[b],c+=d+"<br />"}else c=a.error;return this.options.notice("Error",c)},a.prototype.Ajax=function(a){var b,c,d,e,f,g,h;b={type:"GET",async:!1,data:null,timeout:5e3,headers:{},url:this.options.url+this.options.version,success:function(){},error:function(){}},b=this.Merge(b,a);try{e=new XMLHttpRequest}catch(i){c=i;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){return c=i,!1}}e.open(b.type.toUpperCase(),b.url,b.async),f=setTimeout(function(a){return function(){return e.abort(),b.error(a.options.notice("error","Request timed out"))}}(this),b.timeout),h=b.headers;for(d in h)g=h[d],e.setRequestHeader(d,g);return e.onreadystatechange=function(){var a;return 4!==e.readyState?null:(clearTimeout(f),a=JSON.parse(e.responseText),200!==e.status?b.error(e,e.status,a):b.success(a,e.status,e))},e.send(this.Serialize(b.data))},a.prototype.Authenticate=function(){return this.options.publicId.length<=0||this.options.userId.length<=0?this.options.notice("error","Public ID and User ID must be set"):this.Ajax({type:"POST",url:this.options.url+"oauth/access_token",data:{grant_type:"implicit",user_id:this.options.userId,client_id:this.options.publicId},async:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(a){return function(b){var c;return a.options.auth={token:b.access_token,expires:b.expires},c=new CustomEvent("MoltinReady",b),window.dispatchEvent(c)}}(this),error:function(a){return function(){return a.options.notice("error","Authorization failed")}}(this)})},a.prototype.Request=function(a,b,c){var d;return null==b&&(b="GET"),null==c&&(c=null),d={},this.Ajax({type:b,url:this.options.url+this.options.version+"/"+a,data:c,async:!1,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.options.auth.token},success:function(){return function(a){return d=a}}(this),error:function(a){return function(b){var c,e,f,g,h;if(f=JSON.parse(b.responseText),f.status===!1){if(null!=f.errors){h=f.errors;for(e in h)g=h[e],c+=g+"\n"}else c=f.error;a.options.notice("error",c)}return d=f}}(this)}),d},a.prototype.Product=function(){return{_data:{},Data:function(){return _data.result},Get:function(a){return function(b){var c;return c=a.Request("product/"+b),c.result}}(this),List:function(a){return function(b,c){var d,e;return null==b&&(b=0),null==c&&(c=10),e={offset:b,limit:c},d=a.Request("products","GET",e),d.result}}(this)}},a}();
//# sourceMappingURL=moltin.min.js.map