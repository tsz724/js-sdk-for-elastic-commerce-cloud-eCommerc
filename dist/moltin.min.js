/*! moltin-sdk minified - v0.1.0 - 2014-06-05 */
var Moltin,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};Moltin=function(){function a(a){this.options=this.Merge(this.options,a),this.Product=new e(this),this.Category=new c(this),this.Brand=new b(this),this.Collection=new d(this)}var b,c,d,e;return a.prototype.options={publicId:"",auth:{},url:"https://api.molt.in/",version:"beta",debug:!1,notice:function(a,b){return alert(a+": "+b)},methods:["GET","POST","PUT","DELETE"]},a.prototype.Merge=function(a,b){var c,d,e;d={};for(c in a)e=a[c],d[c]=e;for(c in b)e=b[c],d[c]=e;return d},a.prototype.InArray=function(a,b){return __indexOf.call(b,a)<0?!1:!0},a.prototype.Serialize=function(a,b){var c,d,e;null==b&&(b=null),d=[];for(c in a)e=a[c],c=null!==b?b+"["+c+"]":c,d.push("object"==typeof e?this.Serialize(e(c)):encodeURIComponent(c)+"="+encodeURIComponent(e));return d.join("&")},a.prototype.Error=function(a){var b,c,d,e;if(c="","undefind"!=typeof a.errors){e=a.errors;for(b in e)d=e[b],c+=d+"<br />"}else c=a.error;return this.options.notice("Error",c)},a.prototype.Ajax=function(a){var b,c,d,e,f,g,h;b={type:"GET",async:!1,data:null,timeout:5e3,headers:{},url:this.options.url+this.options.version,success:function(){},error:function(){}},b=this.Merge(b,a);try{e=new XMLHttpRequest}catch(i){c=i;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){return c=i,!1}}e.open(b.type.toUpperCase(),b.url,b.async),f=setTimeout(function(a){return function(){return e.abort(),b.error(a.options.notice("error","Your request timed out"))}}(this),b.timeout),h=b.headers;for(d in h)g=h[d],e.setRequestHeader(d,g);return e.onreadystatechange=function(){var a;return 4!==e.readyState?null:(clearTimeout(f),a=JSON.parse(e.responseText),200!==e.status?b.error(e,e.status,a):b.success(a,e.status,e))},e.send(this.Serialize(b.data))},a.prototype.Authenticate=function(a){return null==a&&(a=null),this.options.publicId.length<=0?this.options.notice("error","Public ID and User ID must be set"):this.Ajax({type:"POST",url:this.options.url+"oauth/access_token",data:{grant_type:"implicit",client_id:this.options.publicId},async:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},success:function(b){return function(c){var d;return b.options.auth={token:c.access_token,expires:c.expires},null!=a&&a(c),d=new CustomEvent("MoltinReady",c),window.dispatchEvent(d)}}(this),error:function(a){return function(){return a.options.notice("error","Authorization failed")}}(this)})},a.prototype.Request=function(a,b,c,d){var e;return null==b&&(b="GET"),null==c&&(c=null),null==d&&(d=null),e={},this.Ajax({type:b,url:this.options.url+this.options.version+"/"+a,data:c,async:null!==d?!0:!1,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.options.auth.token},success:function(){return function(a){return null!==d?d(a.result):e=a}}(this),error:function(a){return function(b){var c,d,f,g,h;if(f=JSON.parse(b.responseText),f.status===!1){if(null!=f.errors){h=f.errors;for(d in h)g=h[d],c+=g+"\n"}else c=f.error;a.options.notice("error",c)}return e=f}}(this)}),null===d?e:void 0},b=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b){var c;return null==b&&(b=null),c=this.m.Request("brand/"+a,"GET",null,b),null!==b?c.result:void 0},a.prototype.Find=function(a,b){var c;return null==b&&(b=null),a=this.Merge(a({offset:this.offset,limit:this.limit})),c=this.m.Request("brand","GET",a,b),null!==b?c.result:void 0},a.prototype.List=function(a,b,c){var d;return null==a&&(a=0),null==b&&(b=10),null==c&&(c=null),d=this.m.Request("brands","GET",{offset:this.offset,limit:this.limit},c),null!==c?d.result:void 0},a.prototype.Fields=function(a,b){var c,d;return null==a&&(a=0),null==b&&(b=null),d="brand/"+(0!==a?a+"/fields":"fields"),c=this.m.Requst(d,"GET",null,b),null!==b?c.result:void 0},a}(),c=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b){var c;return null==b&&(b=null),c=this.m.Request("category/"+a,"GET",null,b),null!==b?c.result:void 0},a.prototype.Find=function(a,b){var c;return null==b&&(b=null),a=this.Merge(a({offset:this.offset,limit:this.limit})),c=this.m.Request("category","GET",a,b),null!==b?c.result:void 0},a.prototype.List=function(a,b,c){var d;return null==a&&(a=0),null==b&&(b=10),null==c&&(c=null),d=this.m.Request("categories","GET",{offset:this.offset,limit:this.limit},c),null!==c?d.result:void 0},a.prototype.Tree=function(a){var b;return null==a&&(a=null),b=this.m.Request("category/tree","GET",null,a),null!==a?b.result:void 0},a.prototype.Fields=function(a,b){var c,d;return null==a&&(a=0),null==b&&(b=null),d="category/"+(0!==a?a+"/fields":"fields"),c=this.m.Requst(d,"GET",null,b),null!==b?c.result:void 0},a}(),d=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b){var c;return null==b&&(b=null),c=this.m.Request("collection/"+a,"GET",null,b),null!==b?c.result:void 0},a.prototype.Find=function(a,b){var c;return null==b&&(b=null),a=this.Merge(a({offset:this.offset,limit:this.limit})),c=this.m.Request("collection","GET",a,b),null!==b?c.result:void 0},a.prototype.List=function(a,b,c){var d;return null==a&&(a=0),null==b&&(b=10),null==c&&(c=null),d=this.m.Request("collections","GET",{offset:this.offset,limit:this.limit},c),null!==c?d.result:void 0},a.prototype.Fields=function(a,b){var c,d;return null==a&&(a=0),null==b&&(b=null),d="collection/"+(0!==a?a+"/fields":"fields"),c=this.m.Requst(d,"GET",null,b),null!==b?c.result:void 0},a}(),e=function(){function a(a){this.m=a}return a.prototype.Get=function(a,b){var c;return null==b&&(b=null),c=this.m.Request("product/"+a,"GET",null,b),null!==b?c.result:void 0},a.prototype.Find=function(a,b){var c;return null==b&&(b=null),a=this.Merge(a({offset:this.offset,limit:this.limit})),c=this.m.Request("product","GET",a,b),null!==b?c.result:void 0},a.prototype.List=function(a,b,c){var d,e;return null==a&&(a=0),null==b&&(b=10),null==c&&(c=null),e={offset:a,limit:b},d=this.m.Request("products","GET",e,c),null!==c?d.result:void 0},a.prototype.Search=function(a,b,c,d){var e;return null==b&&(b=0),null==c&&(c=10),null==d&&(d=null),a=this.Merge(a({offset:this.offset,limit:this.limit})),e=this.m.Request("products/search","GET",a,d),null!==d?e.result:void 0},a.prototype.Fields=function(a,b){var c,d;return null==a&&(a=0),null==b&&(b=null),d="product/"+(0!==a?a+"/fields":"fields"),c=this.m.Requst(d,"GET",null,b),null!==b?c.result:void 0},a.prototype.Modifiers=function(a,b){var c;return null==b&&(b=null),c=this.m.Request("product/"+a+"/modifiers","GET",null,b),null!==b?c.result:void 0},a.prototype.Variations=function(a,b){var c;return null==b&&(b=null),c=this.m.Request("product/"+a+"/variations","GET",null,callback),null!==callback?c.result:void 0},a}(),a}();
//# sourceMappingURL=moltin.min.js.map